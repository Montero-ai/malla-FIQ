<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    .malla {
      display: flex;
      gap: 20px;
      justify-content: center;
    }
    .año {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      padding: 10px;
      flex: 1;
      min-width: 200px;
    }
    .año h2 {
      text-align: center;
      border-bottom: 2px solid #ddd;
    }
    .semestre {
      margin-bottom: 20px;
    }
    .semestre h3 {
      font-size: 16px;
      background: #ddd;
      padding: 5px;
      border-radius: 4px;
      text-align: center;
    }
    .materia {
      background: pink;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 8px;
      margin: 5px 0;
      cursor: pointer;
      opacity: 1;
      transition: background 0.3s, opacity 0.3s;
    }
    .materia.bloqueada {
      background: #ddd;
      cursor: not-allowed;
      opacity: 0.4;
    }
    .materia.activa {
      background: skyblue !important;
      color: black;
    }
  </style>
</head>
<body>
  <h1 style="text-align:center">Malla Interactiva</h1>
  <div class="malla" id="malla"></div>
  <script>
    const materias = {
      "1": {
        "1er Semestre": [
          { nombre: "Taller de Introducción a Ingenierías", abre: ["Balance de Materia y Energía"] },
          { nombre: "Álgebra Lineal" },
          { nombre: "Cálculo Diferencial", abre: ["Cálculo Integral"] },
          { nombre: "Química General", abre: ["Química Orgánica I", "Química Analítica"] },
          { nombre: "Inglés I", abre: ["Inglés II"] },
          { nombre: "Intro. Formación General Universitaria", abre: ["Formación General Disciplinaria"] },
          { nombre: "Desarrollo Sostenible para Ingeniería" }
        ],
        "2.º Semestre": [
          { nombre: "Sistemas de Gestión de la Calidad" },
          { nombre: "Cálculo Integral", abre: ["Cálculo Multivariable", "Ecuaciones Diferenciales"], requiere: ["Cálculo Diferencial"] },
          { nombre: "Física I", abre: ["Física II"] },
          { nombre: "Fisicoquímica I", abre: ["Fisicoquímica II"] },
          { nombre: "Química Orgánica I", abre: ["Química Orgánica II"], requiere: ["Química General"] },
          { nombre: "Inglés II", requiere: ["Inglés I"], abre: ["Inglés III"] }
        ]
      },
      "2": {
        "3.er Semestre": [
          { nombre: "Cálculo Multivariable", requiere: ["Cálculo Integral"] },
          { nombre: "Física II", requiere: ["Física I"] },
          { nombre: "Fisicoquímica II", requiere: ["Fisicoquímica I"], abre: ["Fisicoquímica III", "Fenómenos de Transporte I"] },
          { nombre: "Probabilidad y Estadística", abre: ["Diseño de Experimentos y Análisis de Datos"] },
          { nombre: "Química Orgánica II", requiere: ["Química Orgánica I"] },
          { nombre: "Inglés III", requiere: ["Inglés II"], abre: ["Inglés IV"] }
        ],
        "4.º Semestre": [
          { nombre: "Diseño de Experimentos y Análisis de Datos", requiere: ["Probabilidad y Estadística"] },
          { nombre: "Ecuaciones Diferenciales", requiere: ["Cálculo Integral"], abre: ["Análisis Numérico y Programación", "Gestión de Proyectos Innovadores"] },
          { nombre: "Fisicoquímica III", requiere: ["Fisicoquímica II"], abre: ["Fisicoquímica IV"] },
          { nombre: "Química Analítica", requiere: ["Química General"], abre: ["Análisis Instrumental"] },
          { nombre: "Formación General Disciplinaria", requiere: ["Intro. Formación General Universitaria"], abre: ["Formación General Profesional"] },
          { nombre: "Inglés IV", requiere: ["Inglés III"] },
          { nombre: "Balance de Materia y Energía", requiere: ["Taller de Introducción a Ingenierías"], abre: ["Laboratorio de Ingeniería I"] }
        ]
      },
      "3": {
        "5.º Semestre": [
          { nombre: "Fenómenos de Transporte I", requiere: ["Fisicoquímica II"], abre: ["Fenómenos de Transporte II", "Diseño de Intercambiadores de Calor", "Flujo de Fluidos"] },
          { nombre: "Ingeniería Económica" },
          { nombre: "Análisis Instrumental", requiere: ["Química Analítica"] },
          { nombre: "Análisis Numérico y Programación", requiere: ["Ecuaciones Diferenciales"] },
          { nombre: "Fisicoquímica IV", requiere: ["Fisicoquímica III"], abre: ["Cinética y Reactores Homogéneos"] },
          { nombre: "Ingeniería de Separaciones Mecánicas" }
        ],
        "6.º Semestre": [
          { nombre: "Fenómenos de Transporte II", requiere: ["Fenómenos de Transporte I"], abre: ["Procesos de Separación I"] },
          { nombre: "Gestión de Proyectos Innovadores", requiere: ["Ecuaciones Diferenciales"] },
          { nombre: "Optativa I Complementaria", abre: ["Optativa II Complementaria"] },
          { nombre: "Optativa I Disciplinarias", abre: ["Optativa II Disciplinarias"] },
          { nombre: "Cinética y Reactores Homogéneos", requiere: ["Fisicoquímica IV"], abre: ["Catálisis y Reactores Heterogéneos", "Diseño de Procesos y Productos Químicos"] },
          { nombre: "Diseño de Intercambiadores de Calor", requiere: ["Fenómenos de Transporte I"], abre: ["Ingeniería de Servicios Auxiliares"] },
          { nombre: "Flujo de Fluidos", requiere: ["Fenómenos de Transporte I"] },
          { nombre: "Laboratorio de Ingeniería I", requiere: ["Balance de Materia y Energía"], abre: ["Laboratorio de Ingeniería II"] }
        ]
      },
      "4": {
        "7.º Semestre": [
          { nombre: "Administración de los Procesos Químicos" },
          { nombre: "Vinculación e Integración Social", abre: ["Práctica Profesional (horas por periodo)"] },
          { nombre: "Optativa II Complementaria", requiere: ["Optativa I Complementaria"], abre: ["Optativa III Complementaria"] },
          { nombre: "Optativa II Disciplinarias", requiere: ["Optativa I Disciplinarias"], abre: ["Optativa III Disciplinarias"] },
          { nombre: "Catálisis y Reactores Heterogéneos", requiere: ["Cinética y Reactores Homogéneos"] },
          { nombre: "Diseño de Procesos y Productos Químicos", requiere: ["Cinética y Reactores Homogéneos"], abre: ["Dinámica y Control de Procesos", "Ingeniería de Proyectos", "Tecnologías de Control de la Contaminación"] },
          { nombre: "Laboratorio de Ingeniería II", requiere: ["Laboratorio de Ingeniería I"], abre: ["Laboratorio de Ingeniería III"] },
          { nombre: "Procesos de Separación I", requiere: ["Fenómenos de Transporte II"], abre: ["Procesos de Separación II"] }
        ],
        "8.º Semestre": [
          { nombre: "Formación General Profesional", requiere: ["Formación General Disciplinaria"] },
          { nombre: "Optativa III Complementaria", requiere: ["Optativa II Complementaria"], abre: ["Optativa IV Complementaria"] },
          { nombre: "Optativa III Disciplinarias", requiere: ["Optativa II Disciplinarias"] },
          { nombre: "Dinámica y Control de Procesos", requiere: ["Diseño de Procesos y Productos Químicos"] },
          { nombre: "Ingeniería de Servicios Auxiliares", requiere: ["Diseño de Intercambiadores de Calor"], abre: ["Eficiencia Energética"] },
          { nombre: "Laboratorio de Ingeniería III", requiere: ["Laboratorio de Ingeniería II"] },
          { nombre: "Procesos de Separación II", requiere: ["Procesos de Separación I"] }
        ]
         },
      "5": {
        "9.º Semestre": [
          { nombre: "Práctica Profesional (horas por periodo)", requiere: ["Vinculación e Integración Social"] },
          { nombre: "Optativa IV Complementaria", requiere: ["Optativa III Complementaria"] },
          { nombre: "Eficiencia Energética", requiere: ["Ingeniería de Servicios Auxiliares"] },
          { nombre: "Ingeniería de Proyectos", requiere: ["Diseño de Procesos y Productos Químicos"] },
          { nombre: "Seguridad e Higiene Industrial" },
          { nombre: "Tecnologías de Control de la Contaminación", requiere: ["Diseño de Procesos y Productos Químicos"] }
        ]
      }
    };

    const completadas = new Set();
    const materiasPorNombre = {};

    function crearMalla() {
      const contenedor = document.getElementById("malla");
      for (const año in materias) {
        const columna = document.createElement("div");
        columna.className = "año";

        const tituloAño = document.createElement("h2");
        tituloAño.textContent = `Año ${año}`;
        columna.appendChild(tituloAño);

        for (const semestre in materias[año]) {
          const bloque = document.createElement("div");
          bloque.className = "semestre";

          const titulo = document.createElement("h3");
          titulo.textContent = semestre;
          bloque.appendChild(titulo);

          materias[año][semestre].forEach((materia) => {
            const div = document.createElement("div");
            div.className = "materia bloqueada";
            div.textContent = materia.nombre;
            div.onclick = () => activarMateria(materia.nombre);
            bloque.appendChild(div);
            materiasPorNombre[materia.nombre] = { ...materia, div };
          });

          columna.appendChild(bloque);
        }

        contenedor.appendChild(columna);
      }

      actualizarEstadoMaterias();
    }

    function activarMateria(nombre) {
      const m = materiasPorNombre[nombre];
      if (m.requiere && !m.requiere.every(r => completadas.has(r))) return;

      if (!completadas.has(nombre)) {
        completadas.add(nombre);
        m.div.classList.add("activa");
        actualizarEstadoMaterias();
      }
    }

    function actualizarEstadoMaterias() {
      for (const nombre in materiasPorNombre) {
        const m = materiasPorNombre[nombre];
        const activa = completadas.has(nombre);
        const habilitada = !m.requiere || m.requiere.every(r => completadas.has(r));
        m.div.className = "materia" + (activa ? " activa" : habilitada ? "" : " bloqueada");
      }
    }

    crearMalla();
  </script>
</body>
</html>
